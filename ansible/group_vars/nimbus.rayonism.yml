---
# Geth node
geth_service_name: 'nimbus-nocturne'
geth_service_path: '{{ beacon_node_cont_vol }}'
geth_compose_path: '{{ geth_service_path }}/docker-compose.geth.yml'
geth_rpc_wrapper: '{{ geth_service_path }}/rpc.geth.sh'
geth_cont_image: 'ethereum/client-go@sha256:82920663d5c2378d9d21c640f30c885154e5eca6d1dd7ccec83711f527aeddbf'
geth_account_pass: '{{lookup("passwordstore", "service/Nimbus-Geth/password")}}'
geth_sync_mode: 'fast'
geth_log_level_name: 'debug'
# Enable consensus API
geth_rpc_addr: '127.0.0.1'
geth_rpc_port: 8545
geth_websocket_enabled: true
geth_websocket_port: '{{ geth_rpc_port + 1 | int }}'
geth_rcp_api: 'eth,net,web3,personal,admin,consensus'
geth_websocket_api: 'eth,net,web3,personal,admin,consensus'
# Custom testnet genesis init
geth_init_enabled: true
geth_init_url: 'https://raw.githubusercontent.com/protolambda/nocturne/1f9003379a8207d538d88dc39ca99b5d630e6b39/eth1_config.json'
geth_init_sha256: 'a4e4b611327f3085479c4daaeb4ecffbb41541f720c6d9d9df0f90b75ce08473'
# Necessary for nocturne testnet to work
geth_extra_flags:
  - '--catalyst'
  - '--miner.etherbase 0x6Afe05557279c2060937aE5559Fa6108405a83CC'
  # Hack fix for `invalid peer config: light peer count (100) >= total peer count (0)`
  - '--light.maxpeers=-1'

# WARNING: This is a hack to avoid providing network flag.
geth_network_name: 'mainnet'

# Beacon node
beacon_node_network: 'nocturne'
beacon_node_cont_name: 'beacon-node-{{ beacon_node_network }}-{{ beacon_node_cont_tag }}'
beacon_node_cont_vol: '/docker/{{ beacon_node_cont_name }}'
beacon_node_cont_tag: 'qmerge-large'
beacon_node_web3_urls: [ 'ws://geth:{{ geth_websocket_port }}' ]
# Disabled for genesis to avoid missing first two slots
beacon_node_doppelganger_detection: false

# TODO: Uncomment once validators are available
dist_validators_layout:
  "qmerge-large-01.aws-eu-central-1a.nimbus.rayonism":  { start: 0, end: 2400 }
